
# Custom Initatives

## The following custom initiatives are deployed to the 'lz-canary' and 'lz' Management Groups

Display Name: [     'Public network access should be disabled for PaaS services'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'This policy initiative is a group of policies that prevents creation of Azure PaaS services with exposed public endpoints'
-         policyDefinitionReferenceId: 'CosmosDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'KeyVaultDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'SqlServerDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'StorageDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'AKSDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'ACRDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'AFSDenyPaasPublicIP'
-         policyDefinitionReferenceId: 'PostgreSQLFlexDenyPublicIP'
-         policyDefinitionReferenceId: 'MySQLFlexDenyPublicIP'
-         policyDefinitionReferenceId: 'BatchDenyPublicIP'


Display Name: [     'Deploy Audit Settings to Azure Services'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'This policy set deploys the configurations of application Azure resources to forward Audit logs and metrics to an Azure Log Analytics workspace. See the list of policies of the services that are included '
-         policyDefinitionReferenceId: 'AuditAzActivityLogAssignment'


Display Name: [     'Deploy Diagnostic Settings to Azure Services'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'This policy set deploys the configurations of application Azure resources to forward diagnostic logs and metrics to an Azure Log Analytics workspace. See the list of policies of the services that are included '
-         policyDefinitionReferenceId: 'StorageAccountDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AVDScalingPlansDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'WVDAppGroupDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'WVDWorkspaceDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'WVDHostPoolsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'ACIDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'ACRDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AKSDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AnalysisServiceDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'APIforFHIRDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'APIMgmtDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'ApplicationGatewayDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AutomationDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'BastionDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'BatchDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'CDNEndpointsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'CognitiveServicesDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'CosmosDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'DatabricksDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'DataExplorerClusterDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'DataFactoryDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'DataLakeStoreDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'DataLakeAnalyticsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'EventGridSubDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'EventGridTopicDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'EventHubDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'EventSystemTopicDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'ExpressRouteDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'FirewallDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'FrontDoorDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'FunctionAppDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'HDInsightDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'IotHubDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'KeyVaultDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'LoadBalancerDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'LogicAppsISEDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'LogicAppsWFDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'MariaDBDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'MediaServiceDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'MlWorkspaceDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'MySQLDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'NetworkSecurityGroupsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'NetworkNICDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'PostgreSQLDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'PowerBIEmbeddedDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'NetworkPublicIPNicDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'RecoveryVaultDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'RedisCacheDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'RelayDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'SearchServicesDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'ServiceBusDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'SignalRDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'SQLDatabaseDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'SQLElasticPoolsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'SQLMDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'StreamAnalyticsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'TimeSeriesInsightsDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'TrafficManagerDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'VirtualNetworkDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'VirtualMachinesDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'VMSSDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'VNetGWDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AppServiceDeployDiagnosticLogDeployLogAnalytics'
-         policyDefinitionReferenceId: 'AppServiceWebappDeployDiagnosticLogDeployLogAnalytics'


Display Name: [     'Deploy Microsoft Defender for Cloud configuration'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'Deploy Microsoft Defender for Cloud configuration'
-         policyDefinitionReferenceId: 'defenderForOssDb'
-         policyDefinitionReferenceId: 'defenderForVM'
-         policyDefinitionReferenceId: 'defenderForSqlServerVirtualMachines'
-         policyDefinitionReferenceId: 'defenderForAppServices'
-         policyDefinitionReferenceId: 'defenderForStorageAccounts'
-         policyDefinitionReferenceId: 'defenderforContainers'
-         policyDefinitionReferenceId: 'defenderForKeyVaults'
-         policyDefinitionReferenceId: 'defenderForDns'
-         policyDefinitionReferenceId: 'defenderForArm'
-         policyDefinitionReferenceId: 'defenderForSqlPaas'
-         policyDefinitionReferenceId: 'securityEmailContact'
-         policyDefinitionReferenceId: 'ascExport'


Display Name: [     'Configure Azure PaaS services to use private DNS zones'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'This policy initiative is a group of policies that ensures private endpoints to Azure PaaS services are integrated with Azure Private DNS zones'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-File-Sync'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-Web'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-Batch'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-App'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-Site-Recovery'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-IoT'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-KeyVault'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-SignalR'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-AppServices'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-EventGridTopics'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-DiskAccess'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-CognitiveServices'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-IoTHubs'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-EventGridDomains'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-RedisCache'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-ACR'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-EventHubNamespace'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-MachineLearningWorkspace'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-ServiceBusNamespace'
-         policyDefinitionReferenceId: 'DINE-Private-DNS-Azure-CognitiveSearch'


Display Name: [     'Deploy SQL Database built-in SQL security configuration'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'Deploy auditing, Alert, TDE and SQL vulnerability to SQL Databases when it not exist in the deployment'
-         policyDefinitionReferenceId: 'SqlDbTdeDeploySqlSecurity'
-         policyDefinitionReferenceId: 'SqlDbSecurityAlertPoliciesDeploySqlSecurity'
-         policyDefinitionReferenceId: 'SqlDbAuditingSettingsDeploySqlSecurity'
-         policyDefinitionReferenceId: 'SqlDbVulnerabilityAssessmentsDeploySqlSecurity'


Display Name: [     'Deny or Audit resources without Encryption with a customer-managed key (CMK)'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'Deny or Audit resources without Encryption with a customer-managed key (CMK)'
-         policyDefinitionReferenceId: 'ACRCmkDeny'
-         policyDefinitionReferenceId: 'AksCmkDeny'
-         policyDefinitionReferenceId: 'WorkspaceCMK'
-         policyDefinitionReferenceId: 'CognitiveServicesCMK'
-         policyDefinitionReferenceId: 'CosmosCMKEffect'
-         policyDefinitionReferenceId: 'DataBoxCMKEffect'
-         policyDefinitionReferenceId: 'StreamAnalyticsCMKEffect'
-         policyDefinitionReferenceId: 'SynapseWorkspaceCMKEffect'
-         policyDefinitionReferenceId: 'StorageCMKEffect'
-         policyDefinitionReferenceId: 'MySQLCMKEffect'
-         policyDefinitionReferenceId: 'PostgreSQLCMKEffect'
-         policyDefinitionReferenceId: 'SqlServerTDECMKEffect'
-         policyDefinitionReferenceId: 'HealthcareAPIsCMKEffect'
-         policyDefinitionReferenceId: 'AzureBatchCMKEffect'
-         policyDefinitionReferenceId: 'EncryptedVMDisksEffect'


Display Name: [     'Deny or Deploy and append TLS requirements and SSL enforcement on resources without Encryption in transit'](modules/policies/definitions/policy_definition_es_deploy_windows_domainjoin.bicep)  
    description: 'Choose either Deploy if not exist and append in combination with audit or Select Deny in the Policy effect. Deny polices shift left. Deploy if not exist and append enforce but can be changed, and because missing exsistense condition require then the combination of Audit. '
-         policyDefinitionReferenceId: 'AppServiceHttpEffect'
-         policyDefinitionReferenceId: 'AppServiceminTlsVersion'
-         policyDefinitionReferenceId: 'APIAppServiceLatestTlsEffect'
-         policyDefinitionReferenceId: 'FunctionLatestTlsEffect'
-         policyDefinitionReferenceId: 'WebAppServiceLatestTlsEffect'
-         policyDefinitionReferenceId: 'APIAppServiceHttpsEffect'
-         policyDefinitionReferenceId: 'FunctionServiceHttpsEffect'
-         policyDefinitionReferenceId: 'WebAppServiceHttpsEffect'
-         policyDefinitionReferenceId: 'AKSIngressHttpsOnlyEffect'
-         policyDefinitionReferenceId: 'MySQLEnableSSLDeployEffect'
-         policyDefinitionReferenceId: 'MySQLEnableSSLEffect'
-         policyDefinitionReferenceId: 'PostgreSQLEnableSSLDeployEffect'
-         policyDefinitionReferenceId: 'PostgreSQLEnableSSLEffect'
-         policyDefinitionReferenceId: 'RedisTLSDeployEffect'
-         policyDefinitionReferenceId: 'RedisdisableNonSslPort'
-         policyDefinitionReferenceId: 'RedisDenyhttps'
-         policyDefinitionReferenceId: 'SQLManagedInstanceTLSDeployEffect'
-         policyDefinitionReferenceId: 'SQLManagedInstanceTLSEffect'
-         policyDefinitionReferenceId: 'SQLServerTLSDeployEffect'
-         policyDefinitionReferenceId: 'SQLServerTLSEffect'
-         policyDefinitionReferenceId: 'StorageHttpsEnabledEffect'
-         policyDefinitionReferenceId: 'StorageDeployHttpsEnabledEffect'


